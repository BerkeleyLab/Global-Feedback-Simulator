#from readjson import *
from readjson.readjson import *
import linac
from linac_pretty_print import *
#reload(readjson)
#from readjson import *
a,accelout,linp_arr,gun=loadaccelerator("readjson/footest.cfg", defaultfile="readjson/default.cfg")

print lintostr(linp_arr[0])

Nlinac=len(accelout)
#input
dN_Nf=0.0
dtg=0.0
dEg=0.0
dsig_z=0.0
dsig_E=0.0
chirp = 0.0
dphivr= linac.double_Array(Nlinac)
dV_Vvr= linac.double_Array(Nlinac)
#outputs
Ipk= linac.double_Array(Nlinac)
sz= linac.double_Array(Nlinac)
dE_E= linac.double_Array(Nlinac)
sd= linac.double_Array(Nlinac)
dt= linac.double_Array(Nlinac)
sdsgn= linac.double_Array(Nlinac)
k= linac.double_Array(Nlinac)
Eloss= linac.double_Array(Nlinac)
dE_Ei= linac.double_Array(Nlinac)
dE_Ei2= linac.double_Array(Nlinac)
cor1= linac.double_Array(Nlinac+1)

linac.doublecompress(gun,linp_arr.cast(),Nlinac,
		       dN_Nf,  dtg,  dEg,
		       dsig_z,   dsig_E,  chirp,
		       dphivr,  dV_Vvr,
		       Ipk,  sz,  dE_E,
		       sd ,  dt,  sdsgn, 
		       k,  Eloss,  dE_Ei,
		       dE_Ei2,  cor1)
